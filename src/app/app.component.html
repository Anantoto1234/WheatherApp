<div class="weather-app">
  <header class="header">
    <div class="header-content">
      <h1>ğŸŒ¤ï¸ Weather App</h1>
      <p class="subtitle">Thá»i tiáº¿t chÃ­nh xÃ¡c, cáº­p nháº­t liÃªn tá»¥c</p>
    </div>
    
    <div class="search-container">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="city" 
          (keyup.enter)="onCityChange()"
          placeholder="TÃ¬m kiáº¿m thÃ nh phá»‘..."
          class="city-input"
        />
        <button (click)="onCityChange()" class="search-btn">
          <span class="search-icon">ğŸ”</span>
        </button>
      </div>
      
      <button (click)="onLocationClick()" class="location-btn" [disabled]="loading">
        <span class="location-icon">ğŸ“</span>
        <span>Vá»‹ trÃ­ hiá»‡n táº¡i</span>
      </button>
    </div>
  </header>

  <main class="main-content">
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
      <div class="loading-spinner">
        <div class="spinner"></div>
        <div class="spinner"></div>
        <div class="spinner"></div>
      </div>
      <p class="loading-text">Äang táº£i dá»¯ liá»‡u thá»i tiáº¿t...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-container">
      <div class="error-icon">âš ï¸</div>
      <p class="error-text">{{ error }}</p>
      <button (click)="getCurrentLocationWeather()" class="retry-btn">
        Thá»­ láº¡i
      </button>
    </div>

    <!-- Current Weather -->
    <div *ngIf="currentWeather && !loading" class="current-weather-card">
      <div class="weather-header">
        <div class="location-info">
          <h2 class="city-name">{{ currentWeather.name }}</h2>
          <p class="location-type" *ngIf="locationPermission">ğŸ“ Vá»‹ trÃ­ hiá»‡n táº¡i</p>
          <p class="location-type" *ngIf="!locationPermission">ğŸ” TÃ¬m kiáº¿m</p>
        </div>
        <div class="weather-icon-large">
          <img [src]="getWeatherIcon(currentWeather.weather[0].icon)" 
               [alt]="currentWeather.weather[0].description"
               class="weather-icon">
        </div>
      </div>
      
      <div class="temperature-section">
        <div class="main-temp" [style.color]="getTemperatureColor(currentWeather.main.temp)">
          {{ currentWeather.main.temp | number:'1.0-0' }}Â°C
        </div>
        <div class="weather-description">
          {{ currentWeather.weather[0].description }}
        </div>
        <div class="feels-like">
          Cáº£m giÃ¡c nhÆ° {{ currentWeather.main.feels_like | number:'1.0-0' }}Â°C
        </div>
      </div>
      
      <div class="weather-details-grid">
        <div class="detail-item">
          <div class="detail-icon">ğŸ’§</div>
          <div class="detail-content">
            <span class="detail-label">Äá»™ áº©m</span>
            <span class="detail-value">{{ currentWeather.main.humidity }}%</span>
          </div>
        </div>
        
        <div class="detail-item">
          <div class="detail-icon">ğŸŒ¡ï¸</div>
          <div class="detail-content">
            <span class="detail-label">Ãp suáº¥t</span>
            <span class="detail-value">{{ currentWeather.main.pressure }} hPa</span>
          </div>
        </div>
        
        <div class="detail-item">
          <div class="detail-icon">ğŸ’¨</div>
          <div class="detail-content">
            <span class="detail-label">GiÃ³</span>
            <span class="detail-value">{{ currentWeather.wind.speed }} m/s {{ getWindDirection(currentWeather.wind.deg) }}</span>
          </div>
        </div>
        
        <div class="detail-item" *ngIf="currentWeather.visibility">
          <div class="detail-icon">ğŸ‘ï¸</div>
          <div class="detail-content">
            <span class="detail-label">Táº§m nhÃ¬n</span>
            <span class="detail-value">{{ (currentWeather.visibility / 1000) | number:'1.1-1' }} km</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Forecast -->
    <div *ngIf="forecast && !loading" class="forecast-section">
      <h3 class="forecast-title">ğŸ“… Dá»± bÃ¡o 5 ngÃ y tá»›i</h3>
      <div class="forecast-grid">
        <div *ngFor="let item of getForecastForNextDays(); let i = index" 
             class="forecast-card" 
             [style.animation-delay]="(i * 0.1) + 's'">
          <div class="forecast-date">{{ formatDate(item.dt) }}</div>
          <div class="forecast-weather">
            <img [src]="getWeatherIcon(item.weather[0].icon)" 
                 [alt]="item.weather[0].description"
                 class="forecast-icon">
            <span class="forecast-desc">{{ item.weather[0].description }}</span>
          </div>
          <div class="forecast-temps">
            <span class="temp-max">{{ item.main.temp_max | number:'1.0-0' }}Â°</span>
            <span class="temp-min">{{ item.main.temp_min | number:'1.0-0' }}Â°</span>
          </div>
          <div class="forecast-details">
            <div class="forecast-humidity">ğŸ’§ {{ item.main.humidity }}%</div>
            <div class="forecast-wind">ğŸ’¨ {{ item.wind.speed }} m/s</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <p>Dá»¯ liá»‡u tá»« OpenWeatherMap</p>
  </footer>
</div>
